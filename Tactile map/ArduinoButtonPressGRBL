const int buttonPin = 2;  // Connect your button to digital pin 2
int lastButtonState = HIGH;
unsigned long lastDebounceTime = 0;
unsigned long debounceDelay = 50;

String colors[] = {"RED", "GREEN", "BLUE", "YELLOW", "ORANGE", "PURPLE", "PINK", "WHITE", "BLACK"};
int colorIndex = 0;

void setup() {
  pinMode(buttonPin, INPUT_PULLUP); // Use internal pull-up resistor
  Serial.begin(115200);
  delay(2000); // Give GRBL host time to connect
  Serial.println("COLOR:RED"); // Default color
}

void loop() {
  int reading = digitalRead(buttonPin);

  if (reading != lastButtonState) {
    lastDebounceTime = millis();
  }

  if ((millis() - lastDebounceTime) > debounceDelay && reading == LOW && lastButtonState == HIGH) {
    colorIndex = (colorIndex + 1) % (sizeof(colors) / sizeof(colors[0]));
    Serial.print("COLOR:");
    Serial.println(colors[colorIndex]);
  }

  lastButtonState = reading;
}
